{
    "title" : "Job",
    "bsonType": "object",
    "required": [
        "Meta",
        "QoS",
        "ETags"
    ],
    "properties": {
        "Meta": {
            "bsonType": "object",
            "required": [
                "Username",
                "JobId",
                "Datasource",
                "ResourceInfo"
            ],
            "properties": {
                "Username": {"bsonType": "string"},
                "JobId": {"bsonType": "string"},
                "Datasource": {
                    "bsonType": "object",
                    "required": [
                        "name",
                        "bucket",
                        "keys"
                    ],
                    "properties": {
                        "name": {"bsonType": "string"},
                        "bucket": {"bsonType": "string"},
                        "keys": {
                            "bsonType": "object",
                            "properties": {
                                "train": {
                                    "bsonType": "object",
                                    "required": ["samples"],
                                    "properties": {
                                        "samples": {"bsonType": "array", "items": {"bsonType": "string"}},
                                        "targets": {"bsonType": "array", "items": {"bsonType": "string"}},
                                        "manifest": {"bsonType": "string"}
                                    }
                                },
                                "validation": {
                                    "bsonType": "object",
                                    "properties": {
                                        "samples": {"bsonType": "array", "items": {"bsonType": "string"}},
                                        "targets": {"bsonType": "array", "items": {"bsonType": "string"}},
                                        "manifest": {"bsonType": "string"}
                                    }
                                },
                                "test": {
                                    "bsonType": "object",
                                    "properties": {
                                        "samples": {"bsonType": "array", "items": {"bsonType": "string"}},
                                        "targets": {"bsonType": "array", "items": {"bsonType": "string"}},
                                        "manifest": {"bsonType": "string"}
                                    }
                                }
                            }
                        }
                    }
                },
                "ResourceInfo": {
                    "bsonType": "object",
                    "properties": {
                        "CPUMemoryFree": {"bsonType": ["long", "int"]},
                        "GPUMemoryFree": {"bsonType": ["long", "int"]}
                    },
                    "description": "GPU and CPU memory resource information"
                }
            }
        },
        "QoS": {
            "bsonType": "object",
            "required": [
                "UseCache",
                "LazyLoading",
                "MaxPartMill"
            ],
            "properties": {
                "UseCache": {"bsonType": "bool"},
                "LazyLoading": {"bsonType": "bool"},
                "MaxPartMill": {"bsonType": "int"}
            },
            "description": "QoS configuration"
        },
        "ChunkETags": {
            "bsonType": "object",
            "properties": {
                "train": {
                    "bsonType": "object",
                    "required": ["samples"],
                    "properties": {
                        "samples": {"bsonType": "array", "items": {"bsonType": "string"}},
                        "targets": {"bsonType": "array", "items": {"bsonType": "string"}},
                        "manifest": {"bsonType": "string"}
                    }
                },
                "validation": {
                    "bsonType": "object",
                    "required": ["samples"],
                    "properties": {
                        "samples": {"bsonType": "array", "items": {"bsonType": "string"}},
                        "targets": {"bsonType": "array", "items": {"bsonType": "string"}},
                        "manifest": {"bsonType": "string"}
                    }
                },
                "test": {
                    "bsonType": "object",
                    "required": ["samples"],
                    "properties": {
                        "samples": {"bsonType": "array", "items": {"bsonType": "string"}},
                        "targets": {"bsonType": "array", "items": {"bsonType": "string"}},
                        "manifest": {"bsonType": "string"}
                    }
                }
            }
        },
        "Manifests": {
            "bsonType": "object",
            "properties": {
                "train": {
                    "bsonType": "array",
                    "items": {"bsonType": "byte"}
                },
                "validation": {
                    "bsonType": "array",
                    "items": {"bsonType": "byte"}
                },
                "test": {
                    "bsonType": "array",
                    "items": {"bsonType": "byte"}
                }
            }
        }
    }
}